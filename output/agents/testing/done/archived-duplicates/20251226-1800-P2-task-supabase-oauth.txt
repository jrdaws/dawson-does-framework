# Task: Supabase OAuth E2E Tests

Priority: P2
Assigned To: Testing Agent
Depends On: T4 (Connected Services UI)
Estimated Effort: Medium
Curated: 2025-12-26 18:00 NZDT
Quality Score: 8.2/10

---

## Context

Supabase OAuth integration is complete but lacks end-to-end test coverage. After the Connected Services UI is implemented, we can test the full OAuth flow.

---

## Objectives

1. Create E2E tests for Supabase OAuth flow
2. Test login, logout, and session persistence
3. Mock OAuth responses for CI environment
4. Test error handling

---

## Success Criteria

- [ ] E2E test file created
- [ ] Tests cover: login flow, logout flow, session persistence
- [ ] Tests pass in CI with mocked OAuth
- [ ] Error handling tested (invalid token, expired session)

---

## Files to Create

- `website/__tests__/e2e/supabase-oauth.test.tsx`

---

## Test Cases

1. OAuth login redirects to Supabase
2. Successful callback creates session
3. Session persists across page refresh
4. Logout clears session
5. Invalid token shows error
6. Expired session redirects to login

---

## Commands

```bash
cd /Users/joseph.dawson/Documents/dawson-does-framework/website
npm test -- supabase-oauth
npm test  # Full suite
```

---

## Handoff

1. Run full test suite to verify no regressions
2. Commit with message: `test(website): add Supabase OAuth E2E tests`
3. Move this task to `output/agents/testing/done/`
4. Update TESTING_MEMORY.md

---

(TESTING AGENT)

