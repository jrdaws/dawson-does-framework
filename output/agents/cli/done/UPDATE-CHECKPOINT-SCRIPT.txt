# Update Checkpoint Script for Tiered System

**Priority**: P2 - Enhancement
**From**: Documentation Agent
**Date**: 2025-12-25

---

## Task

Update `scripts/checkpoint.sh` to support tiered checkpoints:

| Tier | Trigger | Behavior |
|------|---------|----------|
| Light | `./scripts/checkpoint.sh light` | Commit + push only |
| Standard | `./scripts/checkpoint.sh` | Test + commit + push + memory prompt |
| Full | `./scripts/checkpoint.sh full` | All steps + MINDFRAME + SOP scan |

---

## Implementation

```bash
#!/bin/bash
# scripts/checkpoint.sh - Tiered Checkpoint System v2.0

TIER=${1:-standard}  # light, standard, full

echo "ğŸ”„ Checkpoint ($TIER tier)..."

case $TIER in
  light)
    echo "ğŸ“¦ Light checkpoint: commit + push"
    git add -A
    if ! git diff --cached --quiet; then
      read -p "Commit message: " MSG
      git commit -m "$MSG"
      git push origin main
    else
      echo "â„¹ï¸ No changes to commit"
    fi
    echo "âœ… Light checkpoint complete"
    ;;
    
  standard)
    echo "ğŸ“‹ Running tests..."
    npm test || { echo "âŒ Tests failed"; exit 1; }
    
    git add -A
    if ! git diff --cached --quiet; then
      read -p "Commit message: " MSG
      git commit -m "$MSG"
      git push origin main
    fi
    
    echo ""
    echo "ğŸ“ Update memory (5 lines max):"
    echo "   prompts/agents/memory/[ROLE]_MEMORY.md"
    echo ""
    echo "âœ… Standard checkpoint complete"
    ;;
    
  full)
    echo "ğŸ“‹ Running tests..."
    npm test || { echo "âŒ Tests failed"; exit 1; }
    
    echo "ğŸ“ Staged files:"
    git add -A
    git status --short
    
    if ! git diff --cached --quiet; then
      read -p "Commit message: " MSG
      git commit -m "$MSG"
      git push origin main
    fi
    
    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "ğŸ“ FULL CHECKPOINT REQUIREMENTS:"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "1. Update memory (full 5-category template)"
    echo "   See: prompts/agents/MEMORY_FORMAT.md"
    echo ""
    echo "2. Certify in MINDFRAME if significant work"
    echo "   ./scripts/certify.sh [CODE] [AREA] [STATUS] [VIBE]"
    echo ""
    echo "3. SOP Scan - log opportunities to:"
    echo "   output/agents/quality/workspace/sop-opportunities.md"
    echo ""
    echo "âœ… Full checkpoint complete"
    ;;
    
  *)
    echo "âŒ Unknown tier: $TIER"
    echo "Usage: ./scripts/checkpoint.sh [light|standard|full]"
    exit 1
    ;;
esac
```

---

## Testing

```bash
# Test each tier
./scripts/checkpoint.sh light
./scripts/checkpoint.sh         # default = standard
./scripts/checkpoint.sh full
./scripts/checkpoint.sh invalid # should error
```

---

## Deliverables

1. [ ] Updated `scripts/checkpoint.sh` with tier support
2. [ ] Test all three tiers work correctly
3. [ ] Commit with message: `feat(scripts): add tiered checkpoint support`

---

*Task from Documentation Agent | 2025-12-25*

