# Task: Expand Integration Test Coverage

**Priority:** P2 (Medium)
**Assigned To:** Testing Agent
**Created:** 2025-12-23 19:00
**Quality Score:** 7.6/10

---

## Context

Template Agent's quality audit showed only `saas` template has bundled integrations. We need test coverage for all integration combinations to catch regressions.

Current test count: 693 passing
Goal: Maintain 100% pass rate while adding integration tests

## Vision Alignment

- **Export-First**: Ensures integrations work in exported projects
- **Transparency**: Explicit test coverage for combinations
- **Fail Gracefully**: Catch integration conflicts early

## Objectives

1. Add tests for auth + db + payments combination
2. Add tests for email integrations
3. Add tests for analytics integrations (if exist)
4. Verify integration merging doesn't break builds

## Success Criteria

- [ ] 90%+ integration combination coverage for saas template
- [ ] Tests verify TypeScript compiles after integration apply
- [ ] Test time stays under 30s for full integration suite
- [ ] CI workflow includes integration tests
- [ ] All existing 693 tests still pass

## Integration Combinations to Test

Based on `templates/saas/integrations/`:

```
Auth × DB × Payments:
- supabase × supabase × stripe
- clerk × supabase × stripe

Storage:
- uploadthing (new!)

Email:
- resend (if exists)

Analytics:
- posthog (if exists)
- plausible (if exists)
```

## Files to Create

```
tests/integration/integration-combinations.test.mjs  # Combination tests
tests/integration/integration-build.test.mjs         # Build verification
```

## Testing Approach

```javascript
// Example test structure
import { test, describe } from 'node:test'
import { mergeIntegrations } from '../src/dd/integrations.mjs'

describe('integration combinations', () => {
  test('supabase + stripe combination works', async () => {
    const result = await mergeIntegrations('saas', ['supabase', 'stripe'])
    // Verify no conflicts
    // Verify all files present
    // Verify TypeScript compiles
  })
})
```

## Handoff

1. Move task to `output/testing-agent/done/`
2. Write completion report with coverage metrics
3. Update `prompts/agents/memory/TESTING_MEMORY.md`

---

*Curated by CURATOR Agent | Cycle 5*

