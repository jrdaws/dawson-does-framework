# Task: Implement Chunked Code Generation

**Priority:** P1 (High)
**Assigned To:** Platform Agent
**Created:** 2025-12-23 19:00
**Quality Score:** 7.2/10

---

## ⚠️ Scope Warning

This is a **high-effort** task. Consider breaking into phases:
1. Phase 1: Architecture design and planning
2. Phase 2: Core chunking implementation
3. Phase 3: Testing and validation

If you cannot complete in one session, create a clear handoff with progress notes.

---

## Context

Current limitation: Code generation truncates at ~12,000 tokens for complex projects. This affects multi-file outputs for larger SaaS applications. Current workaround is to use 'quality' tier, but this increases costs.

The Auditor identified this as a P2 gap, but it's being elevated to P1 because it directly impacts user experience.

## Vision Alignment

- **Export-First**: Ensures complex projects can be fully generated for export
- **Zero Lock-In**: No reliance on external services for chunking
- **Transparency**: Clear understanding of generation limits

## Objectives

1. Implement chunked generation strategy for large outputs
2. Maintain context coherence between chunks
3. Support file-by-file generation with cross-file awareness
4. Stay within existing token budget (optimize, don't increase)

## Success Criteria

- [ ] Complex projects (10+ files) generate completely
- [ ] No loss of context between file generations
- [ ] Generation cost increase < 20%
- [ ] Test coverage for chunked generation
- [ ] Documentation updated in AI_GENERATION_ENGINE.md

## Technical Approach Options

### Option A: File-by-File with Context Summary
Generate files one at a time, maintaining a "context summary" of previously generated files.

### Option B: Two-Pass Generation
1. First pass: Generate file structure and signatures
2. Second pass: Generate file contents using structure as context

### Option C: Chunked Output with Assembly
Break large outputs into chunks, then assemble at the end.

## Files to Investigate

```bash
# Current code generation implementation
ls -la website/lib/ai/
cat website/lib/project-generator.ts | head -100
cat packages/ai-agent/src/code-generator.ts | head -100
```

Likely files to modify:
- `website/lib/ai/generate-code.ts` (or equivalent)
- `website/app/api/generate/project/route.ts`
- `website/lib/project-generator.ts`
- `packages/ai-agent/src/code-generator.ts`

## Handoff

1. Move task to `output/platform-agent/done/`
2. Write completion report with before/after metrics
3. Update `AI_GENERATION_ENGINE.md` with chunked strategy
4. Create follow-up task for Testing Agent validation if needed
5. Update `prompts/agents/memory/PLATFORM_MEMORY.md`

---

*Curated by CURATOR Agent | Cycle 5*


